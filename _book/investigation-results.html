<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Investigation Results | Topics in Bayesian Computing</title>
  <meta name="description" content="4 Investigation Results | Topics in Bayesian Computing" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Investigation Results | Topics in Bayesian Computing" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Investigation Results | Topics in Bayesian Computing" />
  
  
  



<meta name="date" content="2020-07-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="test-stand-tools-and-setup.html"/>
<link rel="next" href="summary.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Latex macros for html output

A few very common things you should use:

- $\bm{}$: Bold math.  Use bold for everything except scalars.
- $\tx{}$: Text within math.  Use for abbreviating words, e.g., $A_{\tx{miss}}$.
- $\xx, \YY$: Default macro convention for bold letters (small and capital case).
- $\aal, \TTh$: Default macro convention for bold symbols (first two letters of symbol name, i.e., $\bm{\alpha}$ and $\bm{\Theta}$).
- common stats symbols e.g., $\var$, $\cov$, $\iid$, $\N, defined below.
-->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      TeX: {
	  Macros: {
	      bm: ["\\boldsymbol{#1}",1],
	      tx: ["\\textrm{#1}",1],
	      iid: ["\\overset{\\;\\tx{iid}\\;}{\\sim}"],
	      ind: ["\\overset{\\:\\tx{ind}\\:}{\\sim}"],
	      var: ["\\operatorname{var}"],
	      cov: ["\\operatorname{cov}"],
	      cor: ["\\operatorname{cor}"],
	      N: ["\\mathcal{N}"],
	      ww: ["{\\bm{w}}"],
	      xx: ["{\\bm{x}}"],
	      yy: ["{\\bm{y}}"],
	      zz: ["{\\bm{z}}"],
	      XX: ["{\\bm{X}}"],
	      YY: ["{\\bm{Y}}"],
	      ZZ: ["{\\bm{Z}}"],
	      aal: ["{\\bm{\\alpha}}"],
	      bbe: ["{\\bm{\\beta}}"],
	      gga: ["{\\bm{\\gamma}}"],
	      eet: ["{\\bm{\\eta}}"],
	      lla: ["{\\bm{\\lambda}}"],
	      mmu: ["{\\bm{\\mu}}"],
	      pph: ["{\\bm{\\phi}}"],
	      pps: ["{\\bm{\\psi}}"],
	      rrh: ["{\\bm{\\rho}}"],
	      ssi: ["{\\bm{\\sigma}}"],
	      tta: ["{\\bm{\\tau}}"],
	      tth: ["{\\bm{\\theta}}"],
	      GGa: ["{\\bm{\\Gamma}}"],
	      SSi: ["{\\bm{\\Sigma}}"],
	      TTh: ["{\\bm{\\Theta}}"]
	  }
      }
  });
</script>



</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> The Practical Problem</a></li>
<li class="chapter" data-level="2" data-path="the-bayesian-inference-problem.html"><a href="the-bayesian-inference-problem.html"><i class="fa fa-check"></i><b>2</b> The Bayesian Inference Problem</a><ul>
<li class="chapter" data-level="2.1" data-path="the-bayesian-inference-problem.html"><a href="the-bayesian-inference-problem.html#addressing-scalability"><i class="fa fa-check"></i><b>2.1</b> Addressing Scalability</a></li>
<li class="chapter" data-level="2.2" data-path="the-bayesian-inference-problem.html"><a href="the-bayesian-inference-problem.html#the-trcrp-method"><i class="fa fa-check"></i><b>2.2</b> The TRCRP Method</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="test-stand-tools-and-setup.html"><a href="test-stand-tools-and-setup.html"><i class="fa fa-check"></i><b>3</b> Test Stand Tools and Setup</a><ul>
<li class="chapter" data-level="3.0.1" data-path="test-stand-tools-and-setup.html"><a href="test-stand-tools-and-setup.html#tools"><i class="fa fa-check"></i><b>3.0.1</b> Tools</a></li>
<li class="chapter" data-level="3.0.2" data-path="test-stand-tools-and-setup.html"><a href="test-stand-tools-and-setup.html#installation"><i class="fa fa-check"></i><b>3.0.2</b> First Time Installation and Setup</a></li>
<li class="chapter" data-level="3.0.3" data-path="test-stand-tools-and-setup.html"><a href="test-stand-tools-and-setup.html#post-installation-dockerjupyter-startup"><i class="fa fa-check"></i><b>3.0.3</b> Post Installation docker/jupyter Startup</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="investigation-results.html"><a href="investigation-results.html"><i class="fa fa-check"></i><b>4</b> Investigation Results</a><ul>
<li class="chapter" data-level="4.0.1" data-path="investigation-results.html"><a href="investigation-results.html#investigation_01_univariate_state_assignment.ipynb"><i class="fa fa-check"></i><b>4.0.1</b> investigation_01_univariate_state_assignment.ipynb</a></li>
<li class="chapter" data-level="4.0.2" data-path="investigation-results.html"><a href="investigation-results.html#investigation_02_multivariate_prediction.ipynb"><i class="fa fa-check"></i><b>4.0.2</b> investigation_02_multivariate_prediction.ipynb</a></li>
<li class="chapter" data-level="4.0.3" data-path="investigation-results.html"><a href="investigation-results.html#investigation_03_multivariate_state_assignment.ipynb"><i class="fa fa-check"></i><b>4.0.3</b> investigation_03_multivariate_state_assignment.ipynb</a></li>
<li class="chapter" data-level="4.0.4" data-path="investigation-results.html"><a href="investigation-results.html#investigation_04_univariate_streaming_state_assignment.ipynb"><i class="fa fa-check"></i><b>4.0.4</b> investigation_04_univariate_streaming_state_assignment.ipynb</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>5</b> Summary</a></li>
<li class="chapter" data-level="6" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>6</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Topics in Bayesian Computing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="investigation-results" class="section level1">
<h1><span class="header-section-number">4</span> Investigation Results</h1>
<p>If the steps in the <a href="test-stand-tools-and-setup.html#installation">installation instructions</a> were successfully followed to completion then the investigation code will be available through the links in the <strong>jupyter</strong> directory tree view. The <strong>jupyter</strong> files themselves contain detailed commentary on the usage and coding details; they also provide suggestions to use the stub code as a templates to investigate other time series data sets and application.</p>
<p>The following describes the results and general conclusions of the investigation into the TRCRP method. Refer to the <strong>jupyter notebook</strong> files in the <strong>bnp_time_series</strong> repository<span class="citation">(Torenvliet <a href="#ref-bnp_time_series" role="doc-biblioref">2020</a>)</span> to walk through the investigations file by file, cell by cell.</p>
<div id="investigation_01_univariate_state_assignment.ipynb" class="section level3">
<h3><span class="header-section-number">4.0.1</span> investigation_01_univariate_state_assignment.ipynb</h3>
<p>The first investigation looks at <strong>trcrpm</strong> state assignment. The data in this investigation is taken from a temperature sensor on an industrial cooling water flow with an anomaly at ~1700 samples. The data was read in the field every two seconds and is re-indexed on the integers <span class="math inline">\(0,..,n\)</span>. The anomaly is due to an intermittent failure on corroded contacts in the signal path.</p>
<p>The data was incorporated into a <strong>trcrpm</strong> model and the posterior developed using MCMC sampling. Afterwards the hyper-parameters were resampled in a similar fashion.</p>
<div class="figure"><span id="fig:i1s"></span>
<img src="images/i1statesnew.png" alt="Model state attribution and test data. Unique states are coded to unique colors. Temperature is in degrees Celsius."  />
<p class="caption">
Figure 4.1: Model state attribution and test data. Unique states are coded to unique colors. Temperature is in degrees Celsius.
</p>
</div>
<p>Figure <a href="investigation-results.html#fig:i1s">4.1</a> shows graphically the states attributed to data-points in the time series. As can be seen the state assignment clearly illustrates the main body of the embedded anomaly between samples <span class="math inline">\(1500\)</span> and <span class="math inline">\(2000\)</span>. This result is attained without any special tuning or treatment of the method on the basis of the data.</p>
</div>
<div id="investigation_02_multivariate_prediction.ipynb" class="section level3">
<h3><span class="header-section-number">4.0.2</span> investigation_02_multivariate_prediction.ipynb</h3>
<p>This investigation probes the predictive capabilities of the <strong>trcrpm</strong> in a multivariate setting. The data used in this investigation are taken from four temperature sensors situated fore and aft of a large tank of water. The data is again indexed on the integers and was read from the field every two seconds. The data are divided into a training set of <span class="math inline">\(100\)</span> samples, and a held back set of <span class="math inline">\(50\)</span> samples used to validate model predictions.</p>
<div class="figure"><span id="fig:i2fd"></span>
<img src="images/i2_forecast_data.png" alt="Posterior predictive draws for investigation 2. Temperature is in degrees Celsius."  />
<p class="caption">
Figure 4.2: Posterior predictive draws for investigation 2. Temperature is in degrees Celsius.
</p>
</div>
<p>Figure <a href="investigation-results.html#fig:i2fd">4.2</a> demonstrates the utility of the model in terms of its ability to generate reasonable predictions. The grey regions demark the 5-95% band for the predictions. Again no special tuning was applied to the model generating these results.</p>
</div>
<div id="investigation_03_multivariate_state_assignment.ipynb" class="section level3">
<h3><span class="header-section-number">4.0.3</span> investigation_03_multivariate_state_assignment.ipynb</h3>
The data used in this investigation are the same as is in the first investigation. In this application the data is synthesized by dividing the original series into four separate series. The anomolous behaviour is embedded in the third series <strong>d3</strong>. In the multivariate case <strong>trcrpm</strong> uses a mixture to model the series. This investigation shows that there may be some drawbacks to this approach in terms of state assignment and anomaly detection. In particular <a href="investigation-results.html#fig:i3msa">4.3</a> shows that the model appears to provide only one state assignment across the four, largely unrelated, synthetic series. This appears to cloud the anomaly detection demonstrated in the previous example.
<div class="figure"><span id="fig:i3msa"></span>
<img src="images/i3msa.png" alt="Multivariate state assignment for investigation 3. Temperature is in degrees Celsius."  />
<p class="caption">
Figure 4.3: Multivariate state assignment for investigation 3. Temperature is in degrees Celsius.
</p>
</div>
</div>
<div id="investigation_04_univariate_streaming_state_assignment.ipynb" class="section level3">
<h3><span class="header-section-number">4.0.4</span> investigation_04_univariate_streaming_state_assignment.ipynb</h3>
<p>The data used in this investigation are taken from a cooling water flow rate meter, again read every two seconds. By observation the data set is punctuated with anomalies. To perform this investigation data was incorporated into the <strong>trcrpm</strong> model in batches of sample size <span class="math inline">\(5000\)</span>. To simulate real time streaming, attempts were made to decrease the batch size, however the code-base appeared variously unstable. In some instance errors occurred, in others no state assignments were made. This could be due to any number of reasons, not least of which was the addition of the <strong>bokeh</strong> library, and associated call-backs for interactive graphing, to the python code.</p>
<p>Figure <a href="investigation-results.html#fig:i4lr">4.4</a> shows the results of a multi-day run of the model against incoming dataset batches. The topmost blue trace is the incoming data. On the bottom, the width of each red point demarks a batch of 5000 samples processed, and the vertical magnitude of the point indicates the number of uniques states in the model at the time the batch was processed. The green trace indicates the state attributed to each incoming datapoint – which at this resolution only provides detail regarding the maximum state assigned in the batch.</p>
<p>Of note in Figure <a href="investigation-results.html#fig:i4lr">4.4</a> is the burn-in period over the first <span class="math inline">\(\sim2*10E^5\)</span> samples after which the model state assignments appear to stabilize. Then the one to one correspondence, from samples <span class="math inline">\(\sim2*10E^5\)</span> to <span class="math inline">\(\sim3.5*10E^5\)</span>, between anomalies in the data stream and strong signals in the green state assignment trace. And then the apparent loss of stability of the model for samples <span class="math inline">\(\gt \sim 4*10E^5\)</span>.</p>
<div class="figure"><span id="fig:i4lr"></span>
<img src="images/run_graphs.png" alt="Multivariate state assignment in streaming batch updates for investigation 4.  The incoming data stream is in blue, the model state assignment in green, total states in the model per batch in red. Flow is in kg/s."  />
<p class="caption">
Figure 4.4: Multivariate state assignment in streaming batch updates for investigation 4. The incoming data stream is in blue, the model state assignment in green, total states in the model per batch in red. Flow is in kg/s.
</p>
</div>
To futher investigate the model burn-in time, figure <a href="investigation-results.html#fig:i4sr">4.5</a> highlights another run of the investigation, this time against a dataset with only <span class="math inline">\(4*10E^4\)</span> samples before the first occurence of an anomaly. Despite the shorter burn-in the model appears stable and able to provide a strong signal relative to the incoming anomaly.
<div class="figure"><span id="fig:i4sr"></span>
<img src="images/i4_shortrun.png" alt="Multivariate state assignment with short burn in prior to first anomaly. Flow is in kg/s."  />
<p class="caption">
Figure 4.5: Multivariate state assignment with short burn in prior to first anomaly. Flow is in kg/s.
</p>
</div>
</div>
</div>
<h3> References</h3>
<div id="refs" class="references">
<div id="ref-bnp_time_series">
<p>Torenvliet. 2020. <em>GitHub Repository</em>. <a href="https://github.com/nick-torenvliet/bnp_time_series.git">https://github.com/nick-torenvliet/bnp_time_series.git</a>; GitHub.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="test-stand-tools-and-setup.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summary.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
